WHOLE_PROGRAM                           = 1
FIXED_REGISTERS                         = -ffixed-r2 -ffixed-r3 -ffixed-r26 -ffixed-r27 -ffixed-r28 -ffixed-r29

# CPU
# Internal RC oscillator
# ==============================================================================
F_CPU                                   = 7372800UL

# INT0
# ==============================================================================
INT0_vect_attrs                         = 
INT0_vect_naked                         = 1
int0__run__attrs                        = 
int0__run                               = hd44780_watcher__on_clock

# USART0
# ==============================================================================
USART0__BAUD_RATE                       = 57600UL

usart0__rx__on_data                     = comm__rx__on_data
usart0__rx__complete__interrupt__NAKED  = 1
usart0__rx__complete__interrupt__ATTRS  = 
USART0__RX__DATA__REG                   = 2

usart0__tx__has_next                    = comm__tx__has_next
usart0__tx__next                        = comm__tx__next
usart0__tx__on_done                     = comm__tx__on_done
usart0__tx__data_register_empty__interrupt__NAKED = 1
usart0__tx__data_register_empty__interrupt__ATTRS =
USART0__TX__DATA__REG                   = 3

# TX ring buffer (flags placed in EEPROM's EEDR register, unused)
# ==============================================================================

TX_RING_BUFFER__SIZE                    = 32
TX_RING_BUFFER__HEAD__REG               = 26
TX_RING_BUFFER__TAIL__REG               = 28

TX_RING_BUFFER__NOT_EMPTY__HOST         = EEDR
TX_RING_BUFFER__NOT_EMPTY__BIT          = 0
TX_RING_BUFFER__NOT_FULL__HOST          = EEDR
TX_RING_BUFFER__NOT_FULL__BIT           = 1

# Flags
# ==============================================================================
# Use bits of unused Analog Comparator
NOTIFICATIONS_PENDING__LCD__HOST        = ACSR
NOTIFICATIONS_PENDING__LCD__BIT         = ACIC
NOTIFICATIONS_PENDING__BUTTONS__HOST    = ACSR
NOTIFICATIONS_PENDING__BUTTONS__BIT     = ACIS1
NOTIFICATIONS_PENDING__LEDS__HOST       = ACSR
NOTIFICATIONS_PENDING__LEDS__BIT        = ACIS0

# Inputs/Outputs 
# ==============================================================================


# Inputs/Outputs 
# ==============================================================================

# Watched and driven buttons
# All buttons MUST be on the same port in a continuous block
# NB: LCD data pins are multiplexed with buttons 1-4
BUTTONS__PORT                           = B
BUTTONS__PIN                            = 0


# Outputs 
# ==============================================================================

RTS__PORT                               = D
RTS__PIN                                = 3


# Inputs
# ==============================================================================

# Watched LEDs 
# All LEDs MUST be on the same port in a continuous block
LEDS__PORT                              = D
LEDS__PIN                               = 4

# Watched LCD (HD44780)
# LCD Data pins must be adjacent, all signals except E must be on the same port
# NB: LCD data pins are multiplexed with buttons 1-4
# ==============================================================================
HD44780_DATA__PORT                      = B
HD44780_DATA__PIN                       = 0
HD44780_RES__PORT                       = B
HD44780_RES__PIN                        = 6
HD44780_RW__PORT                        = B
HD44780_RW__PIN                         = 7
HD44780_E__PORT                         = D
HD44780_E__PIN                          = 2
